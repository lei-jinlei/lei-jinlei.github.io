# TCP/IP


#### OSI 7层模型
```
应用层<-------协议------->应用层 应用程序间通信  传输单位APDU

表示层<-------协议------->表示层         处理数据格式,加密   传输单位PPDU

会话层<-------协议------->会话层 建立,维护和管理会话   传输单位SPDU

传输层<-------协议------->传输层 建立端到端的链接 传输单位segment(段)

网络层<-------协议------->网络层 寻址和路由选择 传输单位packet

数据链路层<--协议-->数据链路层 介质访问,链路管理 传输单位frame(帧)

物理层<-------协议------->物理层 比特流传输 传输单位BIT
```


#### TCP/IP四层模型

```
链路层
    设备驱动程序及口卡

网络层
    IP ICMP 和 GMP

运输层 
    TCP 和 UDP

应用层 
    处理特点的应用程序细节  Telnet ftp 和 e-mail等
```


| OSI七层网络模型 | TCP/IP四层概念模型 | 对应网络协议 |
| :---: | :---: | :---: |
| 应用层 | 应用层 | FTP、DNS、Telnet、SNMP、SMTP、HTTP、WWW、NFS |
| 表示层 |  | JPEG、MPEG、ASCII |
| 会话层 | | NFS、SQL、NetBIOS、RPC|
| 传输层 | 传输层 | TCP、UDP、SPX |
| 网络层 | 网络层 | IP、ICMP、ARP、PARP、OSPF、IPX、RIP、IGRP等 |
| 数据链路层 | 数据链路层 | PPP、FR、HDLC、VLAN、MAC等 |
| 物理层 |  | RJ45、CLOCK、IEEE802.3等 |

#### 五层体系结构

五层体系结构包括：应用层、运输层、网络层、数据链路层和物理层。 

五层协议只是OSI和TCP/IP的综合，实际应用还是TCP/IP的四层结构。为了方便可以把下两层称为网络接口层


#### 各层的作用
1、物理层：

主要定义物理设备标准，如网线的接口类型、光纤的接口类型、各种传输介质的传输速率等。它的主要作用是传输比特流（就是由1、0转化为电流强弱来进行传输,到达目的地后在转化为1、0，也就是我们常说的数模转换与模数转换）。这一层的数据叫做比特。 　　

2、数据链路层：

定义了如何让格式化数据以进行传输，以及如何让控制对物理介质的访问。这一层通常还提供错误检测和纠正，以确保数据的可靠传输。 　　

3、网络层：

在位于不同地理位置的网络中的两个主机系统之间提供连接和路径选择。Internet的发展使得从世界各站点访问信息的用户数大大增加，而网络层正是管理这种连接的层。 　　

4、运输层：

定义了一些传输数据的协议和端口号（WWW端口80等），如： 

TCP（transmission control protocol –传输控制协议，传输效率低，可靠性强，用于传输可靠性要求高，数据量大的数据） 

UDP（user datagram protocol–用户数据报协议，与TCP特性恰恰相反，用于传输可靠性要求不高，数据量小的数据，如QQ聊天数据就是通过这种方式传输的）。 主要是将从下层接收的数据进行分段和传输，到达目的地址后再进行重组。常常把这一层数据叫做段。 　　

5、会话层：

通过运输层（端口号：传输端口与接收端口）建立数据传输的通路。主要在你的系统之间发起会话或者接受会话请求（设备之间需要互相认识可以是IP也可以是MAC或者是主机名） 　　

6、表示层：

可确保一个系统的应用层所发送的信息可以被另一个系统的应用层读取。例如，PC程序与另一台计算机进行通信，其中一台计算机使用扩展二一十进制交换码（EBCDIC），而另一台则使用美国信息交换标准码（ASCII）来表示相同的字符。如有必要，表示层会通过使用一种通格式来实现多种数据格式之间的转换。 　　

7、应用层：

是最靠近用户的OSI层。这一层为用户的应用程序（例如电子邮件、文件传输和终端仿真）提供网络服务。


#### TCP 与 UDP 区别总结:
1. TCP面向连接, UDP是无连接的,即发送数据之前不需要建立连接
2. TCP提供可靠的服务,也就是说，通过TCP连接传送的数据，无差错，不丢失，不重复，且按序到达;UDP尽最大努力交付，即不保证可靠交付
3. TCP面向字节流,实际上是TCP把数据看成一连串无结构的字节流;UDP是面向报文的
4. 每一条TCP连接只能是点到点;UDP支持一对一,一对多,多对一和多对多的交互通信
5. TCP首部开销20字节,UDP首部开销小,只有8个字节
6. TCP的逻辑通信信道是双全工的可靠信道,UDP则是不可靠信道